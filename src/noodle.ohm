NOODLE {
  Program     = (Statement ";"?)+
  Statement   = Print 
  			  | Math
              | VarCreate
              | VarAssign
              | Array
              | ArrayAccess
              | Template
              | Fn
              | Ref
              | MethodCall
              | ObjectPropertyAccess
              | TemplateConstruction
			  | Return
              | Expr
              

  Print       = "writeLn" "(" Statement ")"

  Math = Expr "+" Expr			--add
  	   | Expr "-" Expr			--minus
       | Expr "*" Expr	        --times
       | Expr "/" Expr	   	    --divide	
       | References "++"					--increment
       | References "--"					--decrement

  Fn = FnType* "fn" ident ParameterList FuncBody
  
  ParameterList = "(" ListOf<Parameter, ","> ")"
  
  Parameter = "mut"? ident
  
  References = Ref | ObjectProperty
  
  Array = "[" listOf<Statement, ","> "]"
  
  ArrayAccess = "<" ident "at" Statement ">"
  
  StatementParameterList = "(" ListOf<Statement, ","> ")"

  FnCall = "<" ident StatementParameterList ">"

  VarCreate = "mut"? Type ident "is" Statement

  VarAssign = ident "is" Statement
  
  Property = "mut"? "prop" ident "is" Type ","
  
  TemplateBody = "{"  (~"}" Property | Method)* "}"
  
  Template = "template" ident TemplateBody
   
  TemplateConstruction = ident ObjectBody
  
  ObjectBody = "{" (ident ":" Statement ",")* "}"
  
  Method = "method" ident "is" ParameterList FuncBody
  
  MethodCall = "<" ObjectProperty StatementParameterList ">"
  
  ObjectProperty = ident ("." ident)*  
  
  ObjectPropertyAccess = "<" ObjectProperty ">"

  VarGet = "<" ident ">"
  
  Ref = "&" ident

  Type = "number" | "string" | "fn" | "array" | "object" | "reference"

  FuncBody = "{" Statement+ "}"

  FnType = "async" | "pub" | "local"

  Expr = number | string | VarGet | FnCall | Self | MethodCall
  
  number = digit+
  
  Return = "output" "(" Statement ")"

  string = "\"" (~"\"" any)* "\""

  ident = letter idchar*

  idchar = "_" | letter | number
  
  Self = "self" ("." ident)*

}